<!-- left menu -->
<div class="col s12 m5 l3 center-align" ng-include src="'user-pages/views/left-menu.html'"></div>
<!-- right content -->
<div class="content col s12 m7 l9 center-align">
    <h3>
        <u>แบบทดสอบความถนัดทางด้านอาชีพ</u>
    </h3>
    <form ng-submit="analyze()">
        <table class="highlight bordered hoverable">
            <thead>
                <th class="center-align">โจทย์ทั้งหมด 18 ข้อ</th>
                <th class="left-align">&nbsp; ชอบ</th>
                <th class="left-align">&nbsp; ไม่แน่ใจ</th>
                <th class="left-align">&nbsp; ไม่ชอบ</th>
            </thead>
            <tbody>
                <tr ng-repeat="test in test2">
                    <td class="left" style="margin-left: 70px;">&nbsp;&nbsp;&nbsp;&nbsp;
                        <b ng-if="test.ordinal_numbers.length == 2 || test.ordinal_numbers.substring(test.ordinal_numbers.length-1)  == '.'">
                            {{ test.ordinal_numbers }} {{ test.proposition }}
                        </b>
                        <div style="margin-left: 70px;" ng-if=" test.ordinal_numbers.substring(test.ordinal_numbers.length-1)  == '1' || 
                                                            test.ordinal_numbers.substring(test.ordinal_numbers.length-1)  == '2' || 
                                                            test.ordinal_numbers.substring(test.ordinal_numbers.length-1)  == '3'">
                            {{ test.ordinal_numbers }} {{ test.proposition }}
                        </div>
                    </td>
                    <td ng-if="test.ordinal_numbers.substring(test.ordinal_numbers.length-2) == '.1' || 
                            test.ordinal_numbers.substring(test.ordinal_numbers.length-2) == '.2' ||
                            test.ordinal_numbers.substring(test.ordinal_numbers.length-2) == '.3' " class="center-align"
                        style="margin-left: 85px;">
                        <input ng-click="getRadio(test.ordinal_numbers, choice)" ng-model="choice" type="radio" value="A" name="Group{{ test.ordinal_numbers }}"
                            id="A{{ test.ordinal_numbers }}"  required/>
                        <label for="A{{ test.ordinal_numbers }}"></label>
                    </td>
                    <td ng-if="test.ordinal_numbers.substring(test.ordinal_numbers.length-2) == '.1' || 
                test.ordinal_numbers.substring(test.ordinal_numbers.length-2) == '.2' ||
                test.ordinal_numbers.substring(test.ordinal_numbers.length-2) == '.3' " class="center-align" style="margin-left: 85px;">
                        <input ng-click="getRadio(test.ordinal_numbers, choice)" ng-model="choice" type="radio" value="B" name="Group{{ test.ordinal_numbers }}"
                            id="B{{ test.ordinal_numbers }}"  required/>
                        <label for="B{{ test.ordinal_numbers }}"></label>
                    </td>
                    <td ng-if="test.ordinal_numbers.substring(test.ordinal_numbers.length-2) == '.1' || 
                test.ordinal_numbers.substring(test.ordinal_numbers.length-2) == '.2' ||
                test.ordinal_numbers.substring(test.ordinal_numbers.length-2) == '.3' " class="center-align" style="margin-left: 85px;">
                        <input ng-click="getRadio(test.ordinal_numbers, choice)" ng-model="choice" type="radio" value="X" name="Group{{ test.ordinal_numbers }}"
                            id="X{{ test.ordinal_numbers }}"  required/>
                        <label for="X{{ test.ordinal_numbers }}"></label>
                    </td>

                    <td ng-if="test.ordinal_numbers.substring(test.ordinal_numbers.length-2) != '.1' || 
                test.ordinal_numbers.substring(test.ordinal_numbers.length-2) != '.2' ||
                test.ordinal_numbers.substring(test.ordinal_numbers.length-2) != '.3' "></td>
                    <td ng-if="test.ordinal_numbers.substring(test.ordinal_numbers.length-2) != '.1' || 
                test.ordinal_numbers.substring(test.ordinal_numbers.length-2) != '.2' ||
                test.ordinal_numbers.substring(test.ordinal_numbers.length-2) != '.3' "></td>
                    <td ng-if="test.ordinal_numbers.substring(test.ordinal_numbers.length-2) != '.1' || 
                test.ordinal_numbers.substring(test.ordinal_numbers.length-2) != '.2' ||
                test.ordinal_numbers.substring(test.ordinal_numbers.length-2) != '.3' "></td>
                </tr>
            </tbody>
        </table>
        <br>
        <br>

        <button type="submit" class="btn waves-effect">
            ส่งแบบทดสอบ
        </button>
    </form>
    <!-- Modal Structure -->
    <div id="result" class="modal bottom">
        <div class="modal-content">
            <h4>ผลการทดสอบความสนใจทางอาชีพ</h4>
            <table>
                <thead>
                    <th class="center-align">ความถนัดทางด้านอาชีพ 3 ด้าน</th>
                    <th class="center-align">คะแนน</th>
                    <th class="center-align">เปอร์เซ็น</th>
                </thead>
                <tbody ng-repeat="detail in details | orderBy:'percent':true">
                    <tr>
                        <td>{{ detail.title }}</td>
                        <td class="center-align">{{ detail.point }}</td>
                        <td class="center-align">
                            <b>{{ detail.percent | number: 2}} %</b>
                        </td>
                    </tr>
                </tbody>
            </table>
            <br>
            <h4>รายละเอียดการแปลผลแบบทดสอบ</h4>
            <h5>{{ result.title }}</h5>
            <div class="left-align">
                <p>
                    <b>ลักษณะบุคลิกภาพ</b> {{ result.general }}
                    <br>
                    <b>อาชีพที่สอดคล้องกับความถนัด</b> {{ result.vocational }}
                </p>
            </div>
        </div>
        <div class="modal-footer">
            <a href="" class="modal-action modal-close waves-effect waves-red btn-flat">ปิด</a>
        </div>
    </div>
</div>

<script>
    $(document).ready(function () {
        $('.modal').modal();
    });

</script>